import ReceiveModalBox from '.';
import testHelper from '../testHelper';
import { screen, waitFor } from '@testing-library/react';

const context = {
	dispatch: jest.fn(),
	walletState: {
		selectedAccount: {
			address: 'address 1',
			label: 'wallet 1',
			publicKey: 'publicKey 1'
		},
		network: {
			networkIdentifier: 152,
			networkGenerationHashSeed: 'testnet seed'
		}
	}
};

describe('components/ReceiveModalBox', () => {
	it('renders QR code and address', async () => {
		// Arrange:
		testHelper.customRender(<ReceiveModalBox isOpen={true} onRequestClose={jest.fn()} />, context);

		// Act:
		const title = screen.getByText('Receive');
		const address = screen.getByText('address 1');
		const qrCode = screen.getByAltText('Account QR');

		// Assert:
		expect(title).toBeInTheDocument();
		expect(address).toBeInTheDocument();
		await waitFor(() => {
			// eslint-disable-next-line max-len
			expect(qrCode).toHaveAttribute('src', 'data:image/png;base64,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');
		});
	});
});
